var google=google||{},Modernizr=Modernizr||{},Ws={lastHash:"",detectIE:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");t>0&&$("body").addClass("ie")},handleScroll:function(){if(!Modernizr.touch){Ws.parallax();$(".fade_in").each(function(e,t){Ws.checkVisible($(t))&&$(t).delay(100).addClass("animate")})}var e=!1;Ws.lastHash.length&&(e=Ws.highlightSelected());if(e)return;var t=$(window).scrollTop(),n=$(document).height()-($(window).scrollTop()+$(window).height()),r=t+$("#site_nav").height()+$("section").first().height();if(t===0){$("nav a.active").removeClass("active");$("nav a:first").addClass("active")}else if(n<1){$("nav a.active").removeClass("active");$("nav a:last").addClass("active")}else $("section").each(function(e){if(r>=$(this).position().top){$("nav a.active").removeClass("active");$("nav a").eq(e).addClass("active")}})},highlightSelected:function(){var e=!1;$("section").each(function(t){var n="#"+$(this).attr("id");if(n===Ws.lastHash){$("nav a.active").removeClass("active");$("nav a").eq(t).addClass("active");e=!0;return!1}});return e},checkVisible:function(e){var t=$(window),n={top:t.scrollTop(),left:t.scrollLeft()};n.right=n.left+t.width();n.bottom=n.top+t.height();var r=e.offset();r.right=r.left+e.outerWidth();r.bottom=r.top+e.outerHeight();return!(n.right<r.left||n.left>r.right||n.bottom<r.top||n.top>r.bottom)},parallax:function(){$("body").hasClass("ie")||$.each($(".parallax"),function(e,t){var n=$(window).scrollTop(),r=$(t).data("speed");if(Ws.checkVisible($(t))){var i=-($(t).offset().top-n)*r;$(t).css("top",i+"px")}})}};$(document).ready(function(){Ws.detectIE();$(window).scroll(Ws.handleScroll).scroll();$(window).resize(Ws.handleScroll);$(".fade_in_always").each(function(e,t){$(t).addClass("animate")});$(".move_up").each(function(e,t){$(t).addClass("animate")});Modernizr.touch&&$(".fade_in").css("opacity","1");$(".scroll").click(function(e){e.preventDefault();Ws.lastHash=this.hash;$("html,body").animate({scrollTop:$(this.hash).offset().top-$("#site_nav").height()+1},500,"swing",function(){Ws.lastHash=""});Ws.highlightSelected()})});